package  {		import flash.display.MovieClip;		import flash.events.MouseEvent;	import flash.events.Event;	import flash.media.Sound;	import flash.media.SoundChannel;	import flash.events.KeyboardEvent;	public class toolBox extends MovieClip {		private var tools:Array = new Array();		private var pal:palette;		private var currentTool:makeupTool;		private var clk:Sound = new bubble();				private var sc:SoundChannel = new SoundChannel();		public function toolBox() {			// constructor code			addEventListener(Event.ADDED_TO_STAGE, init);			this.addEventListener(MouseEvent.MOUSE_DOWN, toolSelected);			addEventListener(Event.ACTIVATE, active);		}				public function set increment(n:Number):void{			currentTool.size += n;					}				public function set palette(p:palette):void{			pal = p;			p.addEventListener(PaletteEvent.COLOR_CHOSEN, changeColor);					}				private function set brushColor(c:uint):void{			currentTool.color = c;			dispatchEvent(new ToolEvent(ToolEvent.TOOL_CHOSEN,false,false,currentTool.grBrush));		}				private function init(e:Event):void{			for (var i = 0; i<this.numChildren; i++){				var child:* = this.getChildAt(i);				if (child is makeupTool) tools.push(child as makeupTool)  ;			}			currentTool = tools[0];			//focusTools(currentTool)			stage.addEventListener(KeyboardEvent.KEY_DOWN, keyHandler);		}				private function active(e:Event){			focusTools(currentTool);		}				private function toolSelected(m:MouseEvent):void{			if(m.target is makeupTool){				currentTool = m.target as makeupTool;				focusTools(currentTool);				dispatchEvent(new ToolEvent(ToolEvent.TOOL_CHOSEN,false,false,currentTool.grBrush));				sc = clk.play();			}					}				private function changeColor(c:PaletteEvent){			brushColor = c.data;		}								//only one tool can receive focus		private function focusTools(t:makeupTool):void{			for each (var _t:makeupTool in tools){				_t.isActive = (_t===t);			}			brushColor = pal.color;		}				private function keyHandler(e:KeyboardEvent):void{					if(e.charCode == 91 || e.charCode == 93){				increment = (e.charCode == 91) ? -1 : 1;			}		}	}	}